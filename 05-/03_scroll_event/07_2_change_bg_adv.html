<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìŠ¤í¬ë¡¤ ë°°ê²½ìƒ‰ ë³€ê²½</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* í˜„ì¬ ìƒ‰ìƒ ì •ë³´ í‘œì‹œ */
    .color-info {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.9);
      padding: 15px;
      z-index: 1000;
    }

    /* ì»¨í…ì¸  */
    .content {
      padding: 50px 20px;
      max-width: 800px;
      margin: 0 auto;
    }

    .section {
      margin-bottom: 100vh;
      padding: 50px;
      background: rgba(255, 255, 255, 0.9);
      text-align: center;
    }

    .color-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin: 20px auto;
    }

    /* í•´ì™€ ë‹¬ ì»¨í…Œì´ë„ˆ */
    .sky {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      pointer-events: none;
      z-index: 10;
      overflow: hidden;
    }

    /* í•´ ìŠ¤íƒ€ì¼ (ì´ëª¨ì§€) */
    .sun {
      position: absolute;
      font-size: 80px;
    }

    /* ë‹¬ ìŠ¤íƒ€ì¼ (ì´ëª¨ì§€) */
    .moon {
      position: absolute;
      font-size: 70px;
    }
  </style>
</head>
<body>
  <!-- í•˜ëŠ˜ (í•´ì™€ ë‹¬) -->
  <div class="sky">
    <div class="sun" id="sun">â˜€ï¸</div>
    <div class="moon" id="moon">ğŸŒ™</div>
  </div>

  <!-- í˜„ì¬ ìƒ‰ìƒ ì •ë³´ -->
  <div class="color-info">
    <h3>í˜„ì¬ ë°°ê²½ìƒ‰</h3>
    <div class="current-color" id="colorDisplay">rgb(255, 100, 100)</div>
    <div style="margin-top: 10px;">
      <strong>ì§„í–‰ë¥ :</strong> <span id="progressText">0%</span>
    </div>
  </div>

  <!-- ì»¨í…ì¸  -->
  <div class="content">
    <div class="section">
      <h2>ğŸŒ… ìƒˆë²½</h2>
      <p>í˜ì´ì§€ê°€ ì‹œì‘ë  ë•ŒëŠ” ë”°ëœ»í•œ ë¶„í™ìƒ‰ìœ¼ë¡œ ì‹œì‘í•©ë‹ˆë‹¤.</p>
      <div class="color-preview" style="background: rgb(255, 100, 100);"></div>
    </div>

    <div class="section">
      <h2>ğŸŒ„ ì•„ì¹¨</h2>
      <p>ìŠ¤í¬ë¡¤í•˜ë©´ì„œ ìƒ‰ìƒì´ ì˜¤ë Œì§€ë¡œ ë³€í™”í•©ë‹ˆë‹¤.</p>
      <div class="color-preview" style="background: rgb(255, 165, 0);"></div>
    </div>

    <div class="section">
      <h2>â˜€ï¸ ë‚®</h2>
      <p>ë‚® ì‹œê°„ëŒ€ì—ëŠ” ë°ì€ í•˜ëŠ˜ìƒ‰ì´ ë©ë‹ˆë‹¤.</p>
      <div class="color-preview" style="background: rgb(135, 206, 250);"></div>
    </div>

    <div class="section">
      <h2>ğŸŒ… ì €ë…</h2>
      <p>ì €ë…ì—ëŠ” ë³´ë¼ìƒ‰ ê³„ì—´ë¡œ ë³€í™”í•©ë‹ˆë‹¤.</p>
      <div class="color-preview" style="background: rgb(147, 112, 219);"></div>
    </div>

    <div class="section">
      <h2>ğŸŒ™ ë°¤</h2>
      <p>ë§ˆì§€ë§‰ì—ëŠ” ì–´ë‘ìš´ ë°¤ ìƒ‰ìƒìœ¼ë¡œ ë§ˆë¬´ë¦¬ë©ë‹ˆë‹¤.</p>
      <div class="color-preview" style="background: rgb(25, 25, 112);"></div>
    </div>
  </div>

  <script>
    // DOM ìš”ì†Œë“¤ ì„ íƒ
    const colorDisplay = document.querySelector('#colorDisplay')
    const progressText = document.querySelector('#progressText')
    const sun = document.querySelector('#sun')
    const moon = document.querySelector('#moon')

    // ìƒ‰ìƒ ë°°ì—´ (RGB ê°’)
    const colors = [
      { r: 255, g: 100, b: 100 },  // ë¶„í™ (ìƒˆë²½)
      { r: 255, g: 165, b: 0 },    // ì˜¤ë Œì§€ (ì•„ì¹¨)
      { r: 135, g: 206, b: 250 },  // í•˜ëŠ˜ìƒ‰ (ë‚®)
      { r: 147, g: 112, b: 219 },  // ë³´ë¼ (ì €ë…)
      { r: 25, g: 25, b: 112 }     // ë„¤ì´ë¹„ (ë°¤)
    ]

    /*
      í¬ë¬¼ì„  ê³¡ì„  ê³„ì‚°
      ìˆ˜í•™ì  ì›ë¦¬:
        - 2 * normalizedX * (1 - normalizedX) í¬ë¬¼ì„  ê³µì‹
        - normalizedXëŠ” 0~1 ì‚¬ì´ì˜ ê°’ (ì§„í–‰ë¥ )
        - ì™œ 2ë¥¼ ê³±í• ê¹Œ?
          - í¬ë¬¼ì„ ì˜ ê³¡ì„ ì„ ì¡°ì ˆí•˜ëŠ” ì •ìˆ˜ë¡œ ì™„ë§Œí•œ ê³¡ì„ ì„ ìœ„í•´ 2ë¡œ ì„¤ì •
          - 2ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì •ìˆ˜ë¥¼ ê³±í•´ë„ ë¬´ë°©í•¨
          - ìˆ«ìê°€ ì»¤ì§ˆ ìˆ˜ë¡œ ê³¡ë¥ ì´ ì»¤ì§
      ë™ì‘:
        - normalizedX = 0 ì¼ ë•Œ: 2 * 0 * 1 = 0
        - normalizedX = 0.5 ì¼ ë•Œ: 2 * 0.5 * 0.5 = 0.5 (ìµœëŒ“ê°’)
        - normalizedX = 1 ì¼ ë•Œ: 2 * 1 * 0 = 0
        - ì¦‰, 0ì—ì„œ ì‹œì‘í•´ì„œ ì¤‘ê°„ ìœ„ì¹˜(0.5)ì—ì„œ ìµœê³ ì (0.5)ì„ ì°ê³  ë‹¤ì‹œ 0ìœ¼ë¡œ ëŒì•„ì˜¤ëŠ” í¬ë¬¼ì„ 
    */
    function getParabolicCurve(normalizedX) {
      return 2 * normalizedX * (1 - normalizedX)
    }

    // í•´ì™€ ë‹¬ì˜ ìœ„ì¹˜ ë° íˆ¬ëª…ë„ ê³„ì‚°
    function calculateCelestialPosition(progress, isNightTime = false) {
      const screenWidth = window.innerWidth
      const screenHeight = window.innerHeight

      if (!isNightTime) {
        // í•´ì˜ ê²½ë¡œ (ìƒˆë²½ -> ë‚® -> ì €ë…): 0% ~ 60% ì§„í–‰ë¥ 
        const normalizedProgress = Math.min(progress / 0.6, 1)
        const x = normalizedProgress * (screenWidth - 80) // 80ì€ í•´ì˜ í¬ê¸°
        const y = screenHeight * 0.8 - screenHeight * 0.6 * getParabolicCurve(normalizedProgress)

        // ì €ë… ì´í›„ì—ëŠ” í•´ë¥¼ ìˆ¨ê¹€
        sun.style.opacity = progress > 0.6 ? 0 : 1
        return { x, y } // { x: x, y: y }
      }

      // ë‹¬ì˜ ê²½ë¡œ (ì €ë… -> ë°¤ -> ìƒˆë²½): 60% ~ 100% ì§„í–‰ë¥ 
      if (progress < 0.6) {
        moon.style.opacity = 0
        return null
      }

      const normalizedProgress = (progress - 0.6) / 0.4 // 0~1 ì‚¬ì´ ê°’ìœ¼ë¡œ ì •ê·œí™”
      const x = normalizedProgress * (screenWidth - 70) // 70ì€ ë‹¬ì˜ í¬ê¸°
      const y = screenHeight * 0.8 - screenHeight * 0.5 * getParabolicCurve(normalizedProgress)

      moon.style.opacity = 1
      return { x, y }
    }

    /*
      ë‘ ìƒ‰ìƒ ì‚¬ì´ì˜ ì¤‘ê°„ ìƒ‰ìƒ ê³„ì‚° (ì„ í˜• ë³´ê°„ - Linear Interpolation)

      ì„ í˜• ë³´ê°„ì´ë€?
        - ë‘ ê°’ ì‚¬ì´ë¥¼ ë¶€ë“œëŸ½ê²Œ ì´ì–´ì£¼ëŠ” ê³„ì‚° ë°©ë²•
        - ì˜ˆ: ë¹¨ê°•(255, 0, 0)ê³¼ íŒŒë‘(0, 0, 255) ì‚¬ì´ì˜ ì¤‘ê°„ ìƒ‰ìƒ êµ¬í•˜ê¸°

      ê³µì‹: ì‹œì‘ê°’ + (ëê°’ - ì‹œì‘ê°’) * ì§„í–‰ë¥ 
        - factor = 0 ì¼ ë•Œ: color1 (ì‹œì‘ ìƒ‰ìƒ)
        - factor = 0.5 ì¼ ë•Œ: ë‘ ìƒ‰ìƒì˜ ì •í™•íˆ ì¤‘ê°„ ìƒ‰ìƒ
        - factor = 1 ì¼ ë•Œ: color2 (ë ìƒ‰ìƒ)

      ì˜ˆì‹œ:
        - color1.r = 255, color2.r = 100, factor = 0.5
        - ê³„ì‚°: 255 + (100 - 255) * 0.5 = 255 + (-155) * 0.5 = 177.5 â†’ 178
    */
    function interpolateColor(color1, color2, factor) {
      return {
        r: Math.round(color1.r + (color2.r - color1.r) * factor),
        g: Math.round(color1.g + (color2.g - color1.g) * factor),
        b: Math.round(color1.b + (color2.b - color1.b) * factor)
      }
    }

    // RGB ê°ì²´ë¥¼ CSS ë¬¸ìì—´ë¡œ ë³€í™˜
    function rgbToString(color) {
      return `rgb(${color.r}, ${color.g}, ${color.b})`
    }

    // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ì²˜ë¦¬
    function updateBackground() {
      // í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì™€ ì§„í–‰ë¥  ê³„ì‚°
      const scrollY = window.scrollY
      const scrollHeight = document.documentElement.scrollHeight - window.innerHeight
      const progress = Math.min(scrollY / scrollHeight, 1) // 0~1 ì‚¬ì´ ê°’

      // í˜„ì¬ ì§„í–‰ë¥ ì— í•´ë‹¹í•˜ëŠ” ìƒ‰ìƒ êµ¬ê°„ ì°¾ê¸°
      const colorIndex = progress * (colors.length - 1)
      const currentIndex = Math.floor(colorIndex)
      const nextIndex = Math.min(currentIndex + 1, colors.length - 1)
      const factor = colorIndex - currentIndex // êµ¬ê°„ ë‚´ì—ì„œì˜ ì§„í–‰ë¥ 

      // ë‘ ìƒ‰ìƒ ì‚¬ì´ì˜ ì¤‘ê°„ ìƒ‰ìƒ ê³„ì‚°
      const currentColor = colors[currentIndex]
      const nextColor = colors[nextIndex]
      const interpolatedColor = interpolateColor(currentColor, nextColor, factor)

      // ë°°ê²½ìƒ‰ ì ìš©
      const colorString = rgbToString(interpolatedColor)
      document.body.style.background = colorString

      // í•´ì˜ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
      const sunPosition = calculateCelestialPosition(progress, false)
      if (sunPosition) {
        sun.style.transform = `translate(${sunPosition.x}px, ${sunPosition.y}px)`
      }

      // ë‹¬ì˜ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
      const moonPosition = calculateCelestialPosition(progress, true)
      if (moonPosition) {
        moon.style.transform = `translate(${moonPosition.x}px, ${moonPosition.y}px)`
      }

      // ì •ë³´ ì—…ë°ì´íŠ¸
      colorDisplay.textContent = colorString
      progressText.textContent = `${Math.round(progress * 100)}%`
    }

    // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
    window.addEventListener('scroll', updateBackground)

    // ì°½ í¬ê¸° ë³€ê²½ ì‹œì—ë„ ìœ„ì¹˜ ì¬ê³„ì‚°
    window.addEventListener('resize', updateBackground)

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ì‹¤í–‰
    updateBackground()
  </script>
</body>
</html>
